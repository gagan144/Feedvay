

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>User permissions, roles and access management &mdash; feedvay 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="feedvay 1.0 documentation" href="../../index.html"/>
        <link rel="up" title="Accounts" href="index.html"/>
        <link rel="next" title="Models" href="models.html"/>
        <link rel="prev" title="User-Organization membership" href="mod_user_org_membership.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> feedvay
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../main/index.html">Main App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../management_commands/index.html">Management Commands</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Accounts</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#modules">Modules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="mod_registration.html">User Registration</a></li>
<li class="toctree-l3"><a class="reference internal" href="mod_user_login.html">User Login</a></li>
<li class="toctree-l3"><a class="reference internal" href="mod_sessions.html">Session Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="mod_password_recovery.html">Password Recovery</a></li>
<li class="toctree-l3"><a class="reference internal" href="mod_email_verification.html">Email Verification</a></li>
<li class="toctree-l3"><a class="reference internal" href="mod_user_org_membership.html">User-Organization membership</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">User permissions, roles and access management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#obtain-user-permissions">Obtain user permissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#some-anomalies">Some Anomalies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#django-views-decorator">Django views decorator</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#contents">Contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../clients/index.html">Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../console/index.html">Console</a></li>
<li class="toctree-l1"><a class="reference internal" href="../critics/index.html">Critics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../feedback/index.html">Feedback</a></li>
<li class="toctree-l1"><a class="reference internal" href="../form_builder/index.html">Form builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geography/index.html">Geography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../languages/index.html">Languages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../market/index.html">Market</a></li>
<li class="toctree-l1"><a class="reference internal" href="../owlery/index.html">Owlery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reports/index.html">Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../storeroom/index.html">Store Room</a></li>
<li class="toctree-l1"><a class="reference internal" href="../surveys/index.html">Survey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities/index.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../watchdog/index.html">Watchdog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">feedvay</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Accounts</a> &raquo;</li>
      
    <li>User permissions, roles and access management</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/modules/accounts/mod_permissions_roles_and_access.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="user-permissions-roles-and-access-management">
<h1>User permissions, roles and access management<a class="headerlink" href="#user-permissions-roles-and-access-management" title="Permalink to this headline">¶</a></h1>
<p>This sections discusses architecture for <strong>RegisteredUser</strong> permissions for an <strong>Organization</strong>. All permissions, roles and
data access are always in context of organization only. Since a user can be associated to multiple organizations,
the user has multiple sets of permissions, roles and data access for that organization.</p>
<p>This module is inspired by django permission framework and uses the same concept but defining permissions in context of
an organization. It also expands the framework to defined permissions at resource level as well that is what data/record
instances are permitted to the user.</p>
<p>The basic idea behind user permissions is to obtain a permission JSON when required which can be easily looked up to
find a particular permission and data access. The data is stored in databases such that JSON can be easily and quickly
obtained at runtime with minimum operation cost. In order speed up the process and avoid unnecessary overheads, <strong>caching</strong>
is used to cache permission json and subsequent permission requests can be served from cache rather than hitting database.</p>
<p>Following diagram explains the architecture for permissions, roles and data access for a registered user only:</p>
<a class="reference internal image-reference" href="../../_images/user_role_and_access.jpg"><img alt="../../_images/user_role_and_access.jpg" class="align-center" src="../../_images/user_role_and_access.jpg" style="width: 900.0px; height: 1212.3px;" /></a>
<div class="section" id="obtain-user-permissions">
<h2>Obtain user permissions<a class="headerlink" href="#obtain-user-permissions" title="Permalink to this headline">¶</a></h2>
<p>For permission JOSN structure and methods to obtain permissions, kindly refer <a class="reference internal" href="models.html#accounts.models.RegisteredUser" title="accounts.models.RegisteredUser"><code class="xref py py-class docutils literal"><span class="pre">accounts.models.RegisteredUser</span></code></a> methods:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="models.html#accounts.models.RegisteredUser.get_perm_cache_key" title="accounts.models.RegisteredUser.get_perm_cache_key"><code class="xref py py-func docutils literal"><span class="pre">accounts.models.RegisteredUser.get_perm_cache_key()</span></code></a></li>
<li><a class="reference internal" href="models.html#accounts.models.RegisteredUser.fetch_all_permissions" title="accounts.models.RegisteredUser.fetch_all_permissions"><code class="xref py py-func docutils literal"><span class="pre">accounts.models.RegisteredUser.fetch_all_permissions()</span></code></a></li>
<li><a class="reference internal" href="models.html#accounts.models.RegisteredUser.get_data_access" title="accounts.models.RegisteredUser.get_data_access"><code class="xref py py-func docutils literal"><span class="pre">accounts.models.RegisteredUser.get_data_access()</span></code></a></li>
<li><a class="reference internal" href="models.html#accounts.models.RegisteredUser.get_all_permissions" title="accounts.models.RegisteredUser.get_all_permissions"><code class="xref py py-func docutils literal"><span class="pre">accounts.models.RegisteredUser.get_all_permissions()</span></code></a></li>
<li><a class="reference internal" href="models.html#accounts.models.RegisteredUser.delete_permission_cache" title="accounts.models.RegisteredUser.delete_permission_cache"><code class="xref py py-func docutils literal"><span class="pre">accounts.models.RegisteredUser.delete_permission_cache()</span></code></a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="some-anomalies">
<h2>Some Anomalies<a class="headerlink" href="#some-anomalies" title="Permalink to this headline">¶</a></h2>
<p>There are few areas that might not follow above described conventions. These anomalies are:</p>
<blockquote>
<div><ul class="simple">
<li><strong>BSP Feedback Form Association</strong>: Although BSPFeedbackForm has its own permissions, but association of them with the BSP is
determined as per access over <a class="reference internal" href="../market/models.html#market.models.BusinessServicePoint" title="market.models.BusinessServicePoint"><code class="xref py py-class docutils literal"><span class="pre">market.models.BusinessServicePoint</span></code></a>.</li>
<li><strong>BSP Feedback Responses/Rating/Comments</strong>: These are as per access over <a class="reference internal" href="../market/models.html#market.models.BusinessServicePoint" title="market.models.BusinessServicePoint"><code class="xref py py-class docutils literal"><span class="pre">market.models.BusinessServicePoint</span></code></a>. That is, it user has access
over the BSP, he can view responses/rating/comments on them. However, ability to reply on comments are determined from its permissions.</li>
<li><strong>Data access for BSP</strong>: Currently data access for <a class="reference internal" href="../market/models.html#market.models.BusinessServicePoint" title="market.models.BusinessServicePoint"><code class="xref py py-class docutils literal"><span class="pre">market.models.BusinessServicePoint</span></code></a> is determined from
filters specified in <a class="reference internal" href="models.html#accounts.models.UserDataAccess" title="accounts.models.UserDataAccess"><code class="xref py py-class docutils literal"><span class="pre">accounts.models.UserDataAccess</span></code></a>. However, this will be changed and will be
determined from organization hierarchy. The flow is design is yet to be planed.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="django-views-decorator">
<h2>Django views decorator<a class="headerlink" href="#django-views-decorator" title="Permalink to this headline">¶</a></h2>
<p>A decorator on every view that requires certain permissions to allow access.
Kindly refer the decorator <a class="reference internal" href="decorators.html#accounts.decorators.organization_console" title="accounts.decorators.organization_console"><code class="xref py py-func docutils literal"><span class="pre">accounts.decorators.organization_console()</span></code></a>.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="models.html" class="btn btn-neutral float-right" title="Models" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="mod_user_org_membership.html" class="btn btn-neutral" title="User-Organization membership" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Gagandeep Singh.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>